#summary OBDuino OBD2 cable and Interface adapter
#labels Phase-Design

= Introduction =

You cannot directly plug signals from the OBD-II to the Arduino board.
You need a small interface to adapt the signal.

= Details =

==Cable==

To keep compatibility with already existing cable, an OBD-II to DB9F cable is wired like this:

{{{
DB9F			OBD-II
1---------------5  (Signal ground)
2---------------4  (Chassis ground)
3---------------6  (CAN High)
4---------------7  (ISO K line)
5---------------14 (CAN Low)
6---------------10 (J1850 bus-)
7---------------2  (J1850 bus+)
8---------------15 (ISO L Line)
9---------------16 (Battery)
}}}
*Do not plug it into a PC!!! This goes to an interface only!!!*

http://opengauge.org/%7Eobduino/hardware/obd2_cable.jpg

You can make it yourself with an OBD-II plug available at http://www.carplugs.com/ for $5+$3sh. Use at least AWG24 wires especially for Battery and ground.

Or buy an already made cable at http://www.obd2allinone.com/ for $10+$5sh or elsewhere.


==Interface for ISO==

This interface adapts the ISO signals for the Arduino inputs.
It consists of a small IC ([http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=MC33290 Freescale MCZ33290EF]), a 510 ohms resistor, a DB9M that will be plugged with the cable mentioned above, and a few wires that connect to the Arduino board.

The MC33290 is a small chip, you can solder some wires on it for better handling.
http://opengauge.org/%7Eobduino/hardware/MC33290.jpg

Schematic is like this:
{{{
                             MC33290
                            +-------+
Arduino pin 3 -------------5|TX  ISO|4-----------------+------- DB9M pin 4 (ISO K Line)
                            |       |                  |
Arduino pin 2 -------------6|RX  GND|3--DB9M pin 1     / between MC pin 4 and pin 1
                            |       |                  \ goes a 510 ohms resistor
Arduino 5V pin output -----7|VDD  NC|2--               /
                            |       |                  |
Arduino 5V pin output -----8|CEN VBB|1-----------------+------- DB9M pin 9 (12V Battery)
                            +-------+
}}}
The Arduino is powered by the 12V line coming from the cable too
{{{
Arduino 12V input ------------------ DB9M pin 9 (12V Battery)
Arduino GND input ------------------ DB9M pin 2 (Chassis Ground)
}}}
*Some cars have only one ground so you may have to use pin 1 instead of pin 2 to power the board or just solder pin 1 and 2 together*

Interface front:

http://opengauge.org/%7Eobduino/hardware/iso_interface.jpg

Interface back:

http://opengauge.org/%7Eobduino/hardware/iso_interface_back.jpg


==Interface with ELM==

CAN protocol is not easy to program so as a phase 1 we are using an [http:http://www.elmelectronics.com/ ELM327]. This chip integrates all protocol so it could be used for ISO/VPW/PWM too, but it's a $32 chip that add to the duino and LCD, plus a few components.

Diagram of the interface (adaptation of the generic diagram found in the PDF of the ELM327):

http://opengauge.org/%7Eobduino/diagram/CANduino.gif

On the diagram, note that CAN-L (OBD2 pin 14) go to a DB9M pin 5 and CAN-H (OBD2 pin 6)  go to a DB9M pin 3. +5V comes from the Arduino board.

The Arduino is powered by the 12V line coming from the cable too
{{{
Arduino 12V input ------------------ DB9M pin 9 (12V Battery)
Arduino GND input ------------------ DB9M pin 2 (Chassis Ground)
}}}
*Some cars have only one ground so you may have to use pin 1 instead of pin 2 to power the board or just solder pin 1 and 2 together*
